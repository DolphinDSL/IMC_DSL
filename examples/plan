// Plan builder
def home = new Location(41.185242, -8.704803)

def imc_plan = plan {

	planName 'Bananas-Plan'
	
	// set current plan location
	locate home 
	
	// set speed units to use
	speed.units = Speed.Units.METERS_PS
	speed.value = 1.2
	
	// set z reference to use
	z.value = 5
	z.units = Z.Units.ALTITUDE
	
	def new_z = new Z(3,Z.Units.DEPTH)
	// add a goto at current location
	goTo id:"xpto",z:new_z, payload:[[name:"Camera", Frequency: 50, Bananas: 100]]
	rows hstep:30
	yoyo pitch:15
	// change current location by moving north 100 meters
	move 100, 0
	
	// change z value (still using altitude)
	z.value = 4
	
	// add loiter using default radius but using 4 minutes duration duration:240
	loiter duration:90000
	
	// afterwards go back home at surface
	z.value = 0
	z.units = Z.Units.DEPTH
	
	//named args only works on groovy"s constructors otherwise its considered a Map
	skeeping location:home
	
	
	description = "This is a PlanSpecification generated by a Groovy builder"
	
}
imc_plan.sendTo 'lauv-xplore-2'

